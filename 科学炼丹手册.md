# 科学炼丹手册
炼丹过程中新手最大的问题在于解决问题的逻辑不够清晰，喜欢使用“蛮力法”。因此很容易陷入一个
”找到一份开源代码“   
”跑了一下，调了调参“  
"效果不好，下一个"  
"效果好，拿去做集成"

1. 避免蛮力试错的第一步是，<big>**调研做好，找准起点，避免直接从github上一个repo一个repo的蛮力调参**</big>。先查一下论文，查看相关会议中的典型成果。
每篇论文中的related work和实验章节，很容易追溯出更早的工作。
2. 构建策略迭代闭环，找准努力方向。不同的问题有不同的限定，因此不存在一个绝对 的流程可以恰好 适合所有算法问题，一个常用的迭代闭环就是：<br/>
a. 数据集分析  
b. 预处理策略  
c. 算法策略  
d. 模型评价  
e. case study 
3. 摆脱洁癖，提高代码书写速度。算法探索具有极强的不确定性，因此很有可能你写了半天的代码最后由于不work而完全放弃，因此从代码风格上来说，一定要避免把代码写成系统 。**允许 一此垃圾代码可以提高实验迭代的效率。**
4. 分模块验证，快速完成实验
5. 实验管理，代码版本管理。实验管理就是记录下来每一次实验策略名和对应的实验结果。
+ 主线策略中每成功推进一步，就调用git tag打一个tag。这里的tag即策略名，与实验管理的表格中的策略名对齐
+ 如果要在某个策略的基础上尝试一个很不靠谱的探索，那么可以在当前 策略的基础上拉一个分枝出来 ，在这个分支上完成术事情 后切回主分枝。当然万一这个分支上的策略work了，就可以考虑将其转正，合并入主分支并打上相关tag<br/>
    
6. 调参的几个阶段：
+ 第一阶段：调通代码。这时候象征性的持几百条样本就够了，修正语法鸱和严重的逻辑错误
+ 第二阶段：验证收敛性。很多bug不会报错，但会导致训练 完全崩溃或者压根就没在训练。可以对几百条或者几千条样本进行训练 ，看看若干epoch之后训练 loss是否可以下降到0
+ 第三阶段：小规模实验阶段。在万级或十万级别的小样本集上验证模型表现，分析超参数敏感性。这在数据集规模不大时（比如几十万或一二百万）其实可有可无，当训练 集数据极其庞大时（十亿或以上时）还是有必要的
。有一些很细微的bug虽然 不会影响收敛，却会显著 影响最终模型的表现。此外也有助于发现一些离谱的超参数设置。
+ 第四阶段：大规模实验。即有多少数据，就上多少，甚至多训练 几个epoch。进行到第四阶段时，应当绝对保证代码的高度可靠，基本无需调参，否则试错 代价往往难以接受。
  
 
